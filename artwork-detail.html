<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détail de l'œuvre - MCN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: #ffffff; }
        h1, h2, h3, h4 { font-family: 'Cormorant Garamond', serif; font-weight: 300; letter-spacing: -0.02em; }
        .gold-text { background: linear-gradient(135deg, #d4af37 0%, #f4e5a1 50%, #d4af37 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .nav-blur { background: rgba(10, 10, 10, 0.7); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
        .lang-btn { transition: all 0.3s ease; }
        .lang-btn.active { background-color: #d4af37; color: #0a0a0a; border-color: #d4af37; }
        .audio-player { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); }
        /* Custom audio player styles */
        audio::-webkit-media-controls-panel { background-color: rgba(255, 255, 255, 0.1); }
        audio::-webkit-media-controls-play-button { color: #d4af37; }
        audio::-webkit-media-controls-current-time-display, audio::-webkit-media-controls-time-remaining-display { color: #fff; }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="fixed w-full top-0 z-50 nav-blur">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="index.html" class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-600 to-yellow-800 flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg>
                    </div>
                    <span class="text-xl font-light tracking-wide">MCN</span>
                </a>
                <a href="gallery.html" class="text-sm text-gray-300 hover:text-white transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                    <span class="ml-2" data-translate-key="back_to_gallery">Retour à la galerie</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Artwork Detail -->
    <main class="pt-24 pb-20">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="grid lg:grid-cols-2 gap-12 lg:gap-24 items-start">
                <!-- Image -->
                <div class="sticky top-24">
                    <div class="aspect-square rounded-2xl overflow-hidden bg-gray-800">
                        <img id="artwork-image" src="" alt="" class="w-full h-full object-cover">
                    </div>
                </div>

                <!-- Content -->
                <div>
                    <div class="mb-8">
                        <p id="artwork-origin" class="text-yellow-600 text-sm font-medium tracking-widest uppercase mb-2"></p>
                        <h1 id="artwork-title" class="text-5xl md:text-7xl font-light leading-tight"></h1>
                    </div>

                    <!-- Language Selector -->
                    <div class="flex items-center space-x-2 mb-8 border-b border-gray-800 pb-8">
                        <p class="text-sm text-gray-400 mr-4" data-translate-key="lang_label">Langue :</p>
                        <button class="lang-btn active px-4 py-1.5 border border-gray-700 rounded-full text-sm" data-lang="fr">FR</button>
                        <button class="lang-btn px-4 py-1.5 border border-gray-700 rounded-full text-sm" data-lang="en">EN</button>
                        <button class="lang-btn px-4 py-1.5 border border-gray-700 rounded-full text-sm" data-lang="wo">WO</button>
                    </div>

                    <!-- Description -->
                    <div id="artwork-description" class="space-y-6 text-gray-300 text-lg leading-relaxed font-light">
                        <!-- Content will be injected here -->
                    </div>

                    <!-- Audio Player (will be injected) -->
                    <div id="audio-container" class="mt-8"></div>

                    <!-- Video Player (will be injected) -->
                    <div id="video-container" class="mt-8"></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Dictionnaire pour les textes de l'interface
        const uiTranslations = {
            fr: { back_to_gallery: "Retour à la galerie", lang_label: "Langue :", audio_guide: "Audio-guide", video: "Vidéo", not_found: "Désolé, cette œuvre n'a pas été trouvée." },
            en: { back_to_gallery: "Back to gallery", lang_label: "Language:", audio_guide: "Audio-guide", video: "Video", not_found: "Sorry, this artwork was not found." },
            wo: { back_to_gallery: "Dellu ci nataal yi", lang_label: "Làkk:", audio_guide: "Audio-guide", video: "Vidéo", not_found: "Gisagul nataal bi." }
        };

        // --- Database Simulation ---
        const db = {
            artworks: [
                { 
                    id: 1, 
                    title: 'Masque Rituel', 
                    origin: 'Sénégal • XIXe siècle', 
                    img: 'https://images.unsplash.com/photo-1547721064-da6cfb341d50?q=80&w=1974',
                    audio: {
                        fr: './audio/masque-baoule-fr.mp3', // Chemin fictif
                        en: './audio/masque-baoule-en.mp3',
                        wo: './audio/masque-baoule-wo.mp3',
                    },
                    video: './videos/masque-baoule.mp4' // Chemin fictif
                },
                { 
                    id: 2, 
                    title: 'Sculpture Ancestrale', 
                    origin: 'Mali • XVIIIe siècle', 
                    img: 'https://images.unsplash.com/photo-1581610275759-54d14502880f?q=80&w=1974',
                    audio: { fr: './audio/statue-dogon-fr.mp3' },
                    video: './videos/statue-dogon.mp4'
                },
                // ... add all artworks here
            ],
            descriptions: {
                1: {
                    fr: `<p>Ce masque, originaire des communautés côtières du Sénégal, était utilisé lors de cérémonies rituelles pour invoquer les esprits de l'eau. Sa forme allongée et ses motifs géométriques symbolisent la fluidité et le mystère de l'océan.</p><p>Fabriqué en bois de cailcédrat et orné de coquillages, il témoigne d'un savoir-faire artisanal transmis de génération en génération.</p>`,
                    en: `<p>This mask, from the coastal communities of Senegal, was used in ritual ceremonies to invoke the spirits of the water. Its elongated shape and geometric patterns symbolize the fluidity and mystery of the ocean.</p><p>Made of mahogany wood and adorned with shells, it demonstrates a craftsmanship passed down from generation to generation.</p>`,
                    wo: `<p>Mask bi, mi ngi jóge ci askani tefes gi ci Senegaal, dañu ko doon jëfandikoo ci xewi aada ngir woolu rabu ndox mi. Ni mu gudde ak ràññee ni mu tegee ay niq, mi ngi tekktele jëmmi ak kumpa gi nekk ci géej gi.</p><p>Defar nañu ko ci bant bu ñuy wax cailcédrat, teg ci ay yet, loolu di firnde xarañteefu liggeeykat yu fi nekkoon, di ko wàcce ci seeni maam.</p>`
                },
                2: {
                    fr: `<p>Cette sculpture représente un ancêtre fondateur d'un clan malien. Elle servait de réceptacle aux prières et aux offrandes, assurant la protection et la prospérité de la communauté. La posture droite et le regard serein incarnent la sagesse et l'autorité.</p>`,
                    en: `<p>This sculpture represents a founding ancestor of a Malian clan. It served as a receptacle for prayers and offerings, ensuring the protection and prosperity of the community. The upright posture and serene gaze embody wisdom and authority.</p>`,
                    wo: `<p>Natt bi, ab maamu cosaan la tekktele ci benn giir ci Mali. Dañu ko doon jëfandikoo ngir sàkku ay ñaan ak sargal, ngir mu aar askan wi te may leen wërsëg. Taxawaay bu jub bi ak xool bu dal bi, ñoo di tekki xel ak sañ-sañ.</p>`
                }
            }
        };

        // --- Page Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const artworkId = parseInt(params.get('id'));

            const artwork = db.artworks.find(a => a.id === artworkId);
            if (!artwork) {
                const lang = localStorage.getItem('mcn-lang') || 'fr';
                document.querySelector('main').innerHTML = `<p class="text-center text-red-500 text-2xl">${uiTranslations[lang].not_found}</p>`;
                return;
            }

            // Populate static content
            document.getElementById('artwork-image').src = artwork.img;
            document.getElementById('artwork-image').alt = artwork.title;
            document.getElementById('artwork-origin').textContent = artwork.origin;
            document.getElementById('artwork-title').textContent = artwork.title;

            const descriptionContainer = document.getElementById('artwork-description');
            const audioContainer = document.getElementById('audio-container');
            const videoContainer = document.getElementById('video-container');
            const langButtons = document.querySelectorAll('.lang-btn');

            function loadContent(lang) {
                // Translate UI elements
                document.querySelector('[data-translate-key="back_to_gallery"]').textContent = uiTranslations[lang].back_to_gallery;
                document.querySelector('[data-translate-key="lang_label"]').textContent = uiTranslations[lang].lang_label;

                // Load artwork content
                const description = (db.descriptions[artworkId] && db.descriptions[artworkId][lang]) || (db.descriptions[artworkId] && db.descriptions[artworkId]['fr']) || '<p>Description non disponible.</p>';
                descriptionContainer.innerHTML = description;

                // Load audio
                const audioSrc = (artwork.audio && artwork.audio[lang]) || (artwork.audio && artwork.audio['fr']);
                if (audioSrc) {
                    audioContainer.innerHTML = `
                        <div class="audio-player p-4 rounded-2xl">
                            <h4 class="font-semibold mb-3 text-white" data-translate-key="audio_guide">${uiTranslations[lang].audio_guide}</h4>
                            <audio controls class="w-full">
                                <source src="${audioSrc}" type="audio/mpeg">
                                Votre navigateur ne supporte pas l'élément audio.
                            </audio>
                        </div>`;
                } else {
                    audioContainer.innerHTML = '';
                }

                // Load video
                if (artwork.video) {
                    videoContainer.innerHTML = `
                        <div class="mt-8">
                            <h4 class="font-semibold mb-3 text-white" data-translate-key="video">${uiTranslations[lang].video}</h4>
                            <video controls class="w-full rounded-lg">
                                <source src="${artwork.video}" type="video/mp4">
                                Votre navigateur ne supporte pas l'élément vidéo.
                            </video>
                        </div>`;
                } else {
                    videoContainer.innerHTML = '';
                }

                // Update active button
                langButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.lang === lang);
                });
            }

            // Language switcher logic
            langButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const newLang = button.dataset.lang;
                    localStorage.setItem('mcn-lang', newLang);
                    loadContent(newLang);
                });
            });

            // Initial load
            const savedLang = localStorage.getItem('mcn-lang') || 'fr';
            loadContent(savedLang);
        });
    </script>
</body>
</html>